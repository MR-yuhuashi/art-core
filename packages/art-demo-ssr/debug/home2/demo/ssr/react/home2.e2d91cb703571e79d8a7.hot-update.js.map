{"version":3,"sources":["webpack:///../art-ssr-react-router/dist/reactRouterHelper.jsx"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","react_1","react_router_config_1","convertCustomRouteConfig","customRouteConfig","parentRoute","map","route","path","pathResult","replace","component","exact","routes","generateAsyncRouteComponent","loader","Placeholder","Component","props","context","state","updateState","setState","AsyncRouteComponent","load","then","ComponentFromState","default","createElement","ResolvedComponent","catch","err","console","log","ensureReady","routeConfig","providedLocation","matches","matchRoutes","window","location","pathname","Promise","all","match","undefined"],"mappings":"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","file":"demo/ssr/react/home2.e2d91cb703571e79d8a7.hot-update.js","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst react_router_config_1 = require(\"react-router-config\");\nexports.convertCustomRouteConfig = (customRouteConfig, parentRoute) => {\n    return customRouteConfig.map((route) => {\n        if (typeof route.path === 'function') {\n            const pathResult = route.path(parentRoute || '').replace('//', '/');\n            return {\n                path: pathResult,\n                component: route.component,\n                exact: route.exact,\n                routes: route.routes ? exports.convertCustomRouteConfig(route.routes, pathResult) : []\n            };\n        }\n        const path = `${parentRoute}${route.path}`;\n        return {\n            path,\n            component: route.component,\n            exact: route.exact,\n            routes: route.routes ? exports.convertCustomRouteConfig(route.routes, path) : []\n        };\n    });\n};\nexports.generateAsyncRouteComponent = (component) => {\n    const { loader, Placeholder } = component;\n    let Component;\n    return class AsyncRouteComponent extends react_1.default.Component {\n        constructor(props, context) {\n            super(props, context);\n            this.state = {\n                Component\n            };\n            this.updateState = () => {\n                if (this.state.Component !== Component) {\n                    this.setState({\n                        Component\n                    });\n                }\n            };\n        }\n        static load() {\n            return loader().then((ResolvedComponent) => {\n                Component = ResolvedComponent.default || ResolvedComponent;\n            }).catch((err) => {\n                console.log('load component error: ', err);\n            });\n        }\n        componentWillMount() {\n            AsyncRouteComponent.load().then(this.updateState);\n        }\n        render() {\n            const { Component: ComponentFromState } = this.state;\n            if (ComponentFromState) {\n                // return <ComponentFromState { ...this.props } />;\n                return react_1.default.createElement(ComponentFromState, this.props);\n            }\n            if (Placeholder) {\n                // return <Placeholder {...this.props} />;\n                return react_1.default.createElement(Placeholder, this.props);\n            }\n            return null;\n        }\n    };\n};\n/**\n * First match the routes via react-router-config's `matchRoutes` function.\n * Then iterate over all of the matched routes, if they've got a load function\n * call it.\n *\n * This helps us to make sure all the async code is loaded before rendering.\n */\nexports.ensureReady = (routeConfig, providedLocation) => {\n    const matches = react_router_config_1.matchRoutes(routeConfig, providedLocation || window.location.pathname);\n    return Promise.all(matches.map((match) => {\n        const { component } = match.route;\n        if (component && component.load) {\n            try {\n                component.load()\n                    .catch((err) => {\n                    console.log('err: ', err);\n                });\n                return component.load();\n            }\n            catch (err) {\n                console.log('catched err: ', err);\n            }\n        }\n        return undefined;\n    }));\n};\n"],"sourceRoot":""}